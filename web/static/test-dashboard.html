<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shugur Relay - Dashboard Test</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="style.css" rel="stylesheet" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <div class="logo">
            <img src="shugur-logo-full.svg" alt="Shugur Relay" class="logo-img" />
          </div>
          <div class="status-indicator">
            <div class="status-dot online"></div>
            <span>Online</span>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Relay Info Section -->
        <section class="card relay-info">
          <h2><i class="fas fa-broadcast-tower"></i> Relay Information</h2>
          <div class="table-container">
            <table class="info-table">
              <tbody>
                <tr>
                  <td class="info-label">Name</td>
                  <td class="info-value">Shugur Relay</td>
                  <td class="info-actions"></td>
                </tr>
                <tr>
                  <td class="info-label">Description</td>
                  <td class="info-value">High-performance, reliable, and scalable Nostr relay</td>
                  <td class="info-actions"></td>
                </tr>
                <tr>
                  <td class="info-label">Software</td>
                  <td class="info-value">Shugur Relay v0.1.0-dev</td>
                  <td class="info-actions"></td>
                </tr>
                <tr>
                  <td class="info-label">Contact</td>
                  <td class="info-value">
                    <a href="mailto:support@shugur.com" target="_blank">support@shugur.com</a>
                  </td>
                  <td class="info-actions"></td>
                </tr>
                <tr>
                  <td class="info-label">WebSocket URL</td>
                  <td class="info-value">
                    <span class="websocket-url" id="websocket-url">wss://relay.shugur.com</span>
                  </td>
                  <td class="info-actions">
                    <button class="copy-btn tooltip" data-tooltip="Copy WebSocket URL" onclick="copyToClipboard('websocket-url')">
                      <i class="fas fa-copy"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td class="info-label">Public Key</td>
                  <td class="info-value">
                    <span class="pubkey" id="pubkey">npub1j8y6tcdfw3q3f4tcmur13sj2rgkuje24fcfrqjevgk9j6hp79xvs29v5hf</span>
                  </td>
                  <td class="info-actions">
                    <button class="copy-btn tooltip" data-tooltip="Copy Public Key" onclick="copyToClipboard('pubkey')">
                      <i class="fas fa-copy"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td class="info-label">Relay ID</td>
                  <td class="info-value">
                    <span class="relay-id" id="relay-id">shugur_relay_primary_001</span>
                  </td>
                  <td class="info-actions">
                    <button class="copy-btn tooltip" data-tooltip="Copy Relay ID" onclick="copyToClipboard('relay-id')">
                      <i class="fas fa-copy"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td class="info-label">Distributed</td>
                  <td class="info-value">
                    <span class="cluster-indicator">
                      <span class="cluster-status">Yes (3 nodes)</span>
                      <i class="fas fa-info-circle cluster-info-icon tooltip" data-tooltip="CockroachDB cluster with 3 active nodes"></i>
                    </span>
                  </td>
                  <td class="info-actions"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Statistics Section -->
        <section class="stats-section">
          <div class="card stat-card">
            <div class="stat-icon">
              <i class="fas fa-plug"></i>
            </div>
            <div class="stat-content">
              <h3>Active Connections</h3>
              <div class="stat-value" id="active-connections">127</div>
            </div>
          </div>
          <div class="card stat-card">
            <div class="stat-icon">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="stat-content">
              <h3>Processed Requests</h3>
              <div class="stat-value" id="messages-processed">45,892</div>
            </div>
          </div>
          <div class="card stat-card">
            <div class="stat-icon">
              <i class="fas fa-database"></i>
            </div>
            <div class="stat-content">
              <h3>Stored Events</h3>
              <div class="stat-value" id="events-stored">1,239,847</div>
            </div>
          </div>
          <div class="card stat-card">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <h3>Uptime</h3>
              <div class="stat-value" id="uptime">42d 15h 23m</div>
            </div>
          </div>
        </section>

        <!-- NIPs Support Section -->
        <section class="card nips-section">
          <h2><i class="fas fa-check-circle"></i> Supported NIPs</h2>
          <div class="nips-grid">
            <a href="https://github.com/nostr-protocol/nips/blob/master/01.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-01</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/02.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-02</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/03.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-03</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/04.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-04</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/09.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-09</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/11.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-11</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/15.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-15</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/16.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-16</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/17.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-17</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/20.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-20</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/22.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-22</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/23.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-23</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/25.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-25</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/28.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-28</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/33.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-33</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/40.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-40</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/44.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-44</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/50.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-50</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/59.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-59</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/65.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-65</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
            <a href="https://github.com/nostr-protocol/nips/blob/master/78.md" target="_blank" class="nip-badge-link">
              <div class="nip-badge">
                <span class="nip-number">NIP-78</span>
                <i class="fas fa-external-link-alt nip-link-icon"></i>
              </div>
            </a>
          </div>
        </section>

        <!-- Limitations Section -->
        <section class="card limitations-section">
          <h2><i class="fas fa-cog"></i> Relay Configuration</h2>
          <div class="limitations-grid">
            <div class="limitation-item">
              <label>Max Message Length</label>
              <span>65,536 chars</span>
            </div>
            <div class="limitation-item">
              <label>Max Subscriptions</label>
              <span>20</span>
            </div>
            <div class="limitation-item">
              <label>Max Filters</label>
              <span>100</span>
            </div>
            <div class="limitation-item">
              <label>Max Event Tags</label>
              <span>100</span>
            </div>
            <div class="limitation-item">
              <label>Auth Required</label>
              <span class="disabled">No</span>
            </div>
            <div class="limitation-item">
              <label>Payment Required</label>
              <span class="disabled">No</span>
            </div>
          </div>
        </section>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <div class="footer-content">
          <div class="footer-info">
            <div class="footer-brand">
              <img src="shugur-logo-full.svg" alt="Shugur" class="footer-logo" />
            </div>
            <p class="footer-tagline">Build open, resilient tech for everyone.</p>
            <p class="footer-copyright">&copy; <span id="currentYear">2025</span> Shugur Network. All rights reserved.</p>
          </div>
          
          <div class="footer-nav">
            <div class="footer-links">
              <a href="https://github.com/Shugur-Network/Relay" target="_blank">
                <i class="fab fa-github"></i> Source Code
              </a>
              <a href="https://github.com/Shugur-Network/docs" target="_blank">
                <i class="fas fa-book"></i> Documentation
              </a>
              <a href="https://shugur.com" target="_blank">
                <i class="fas fa-globe"></i> Website
              </a>
              <a href="mailto:support@shugur.com" target="_blank">
                <i class="fas fa-envelope"></i> Support
              </a>
            </div>
            
            <div class="footer-status">
              <div class="footer-status-dot"></div>
              <span>Relay Online</span>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
      // Copy to clipboard functionality
      function copyToClipboard(elementId) {
        const element = document.getElementById(elementId);
        const text = element.textContent || element.innerText;
        
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(text).then(() => {
            showCopyFeedback(element);
          }).catch(err => {
            console.error('Failed to copy: ', err);
            fallbackCopy(text);
          });
        } else {
          fallbackCopy(text);
        }
      }

      // Fallback copy method for older browsers
      function fallbackCopy(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
          document.execCommand('copy');
          showCopyFeedback(document.querySelector('.websocket-url, .pubkey, .relay-id'));
        } catch (err) {
          console.error('Fallback copy failed: ', err);
        }
        
        document.body.removeChild(textArea);
      }

      // Visual feedback for copy action
      function showCopyFeedback(element) {
        const originalColor = element.style.color;
        element.style.color = 'var(--success-600)';
        element.style.transition = 'color 0.3s ease';
        
        setTimeout(() => {
          element.style.color = originalColor;
        }, 1500);
      }

      // Simulate real-time stats updates (for demo purposes)
      function simulateStatsUpdates() {
        const statsElements = {
          'active-connections': { base: 127, variance: 20 },
          'messages-processed': { base: 45892, variance: 100 },
          'events-stored': { base: 1239847, variance: 50 }
        };

        setInterval(() => {
          Object.entries(statsElements).forEach(([id, config]) => {
            const element = document.getElementById(id);
            if (element) {
              const variation = Math.floor(Math.random() * config.variance) - (config.variance / 2);
              const newValue = config.base + variation;
              
              element.classList.add('stat-updating');
              setTimeout(() => {
                element.textContent = newValue.toLocaleString();
                element.classList.remove('stat-updating');
              }, 300);
              
              // Update base value for next iteration
              statsElements[id].base = newValue;
            }
          });
        }, 5000); // Update every 5 seconds
      }

      // Update uptime counter
      function updateUptime() {
        let seconds = 42 * 24 * 60 * 60 + 15 * 60 * 60 + 23 * 60; // Convert 42d 15h 23m to seconds
        
        setInterval(() => {
          seconds++;
          const days = Math.floor(seconds / (24 * 60 * 60));
          const hours = Math.floor((seconds % (24 * 60 * 60)) / (60 * 60));
          const minutes = Math.floor((seconds % (60 * 60)) / 60);
          
          const uptimeElement = document.getElementById('uptime');
          if (uptimeElement) {
            uptimeElement.textContent = `${days}d ${hours}h ${minutes}m`;
          }
        }, 60000); // Update every minute
      }

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Update current year
        const currentYear = new Date().getFullYear();
        const yearElement = document.getElementById('currentYear');
        if (yearElement) {
          yearElement.textContent = currentYear;
        }

        // Start simulations
        simulateStatsUpdates();
        updateUptime();

        // Add some interactive hover effects
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach(card => {
          card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-2px)';
          });
          
          card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0)';
          });
        });
      });
    </script>
  </body>
</html>
